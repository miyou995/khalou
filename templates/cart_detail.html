{% extends 'base.html' %}
{% load static %}
{% static "img" as baseUrl %}



{% block content %}

<div class="breadcrumb-option spad set-bg" data-setbg="{% static 'img/breadcrumb-bg.jpg' %}">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>Votre Panier</h2>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Content page -->
<section class="bgwhite p-t-55 p-b-65">
    <div class="container ">
            <div class="row">
                <div class="col-sm-6 col-md-8 col-lg-9 p-b-50">
                    <!--  -->
                    <div class="flex-sb-m flex-w p-b-5">
                        <span class=" p-t-5 p-b-5">
                            <h3 >
                                Vous avez {{cart|length}} Produits
                            </h3>
                        </span>
                    </div>
                    <!-- Product -->
                    <div class="row">
                        {% if cart|length > 0%}
                        {% for item in cart %}
                        {% with product=item.product %}
                            <div class="col-sm-12 col-md-6 col-lg-4 p-b-50 ">
                                <div class="card" style="width: 18rem;">
                                    {% if product.photo %}
                                        <img class="card-img-top" src="{{ product.photo.url }}" alt="{{product.name}}">
                                    {% else %}
                                            <img class="card-img-top" src="/static/img/no-photo.jpg" alt="{{product.name}}">
                                    {% endif %}
                                    <div class="card-body">
                                      <h5 class="card-title">{{product.name}}</h5>
                                      <p class="card-text">Prix: {{product.price}} DA</p>
                                      <td class="num"> Prix Total: ${{ cart.get_total_price }}</td>
                                      <form action="{% url 'cart:cart_remove' product.id %}" method="post">
                                          <input type="submit" value="Remove">
                                          {% csrf_token %}
                                      </form>
                                      <form action="{% url 'cart:cart_update' product.id %}" method="post">
                                        {{ item.update_quantity_form.quantity }}
                                        <input type="submit" value="Modifier">
                                        {% csrf_token %}
                                    </form>
                                    </div>
                                  </div>
                            </div>
                            {% endwith %}
                        {% endfor %}
                        {% else %}
                        <p>Votre panier est vide</p>
                        {% endif %}
                    </div>
    
                </div>
            </div>
            <div class="flex-w flex-sb-m p-t-25 p-b-25 bo8 p-l-35 p-r-60 p-lr-15-sm">
				{% if cart|length > 0 %}
				  
				<div class="flex-w flex-m w-full-sm">
					<div class="size11 m-r-10">
						<a class="flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4" href="{% url 'produits'%}" type="button">POURSUIVRE LES ACHATS</a>
					</div>
				</div>
				<div class="size10 trans-0-4 m-t-10 m-b-10">
					<a class="flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4 " href="{% url 'orders:order_create' %}" type="button">Valider</a>
				</div>
                {% else %}
                <div class="flex-w flex-m w-full-sm">
					<div class="size11 m-r-10">
						<a class="flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4" href="{% url 'produits'%}" type="button">Revenir aux produits</a>
					</div>
				</div>
				{% endif %}

					
			</div>
    </div>
</section>
{%endblock content%}